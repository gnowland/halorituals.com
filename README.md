# Five Template (~~npm~~ yarn version)

This is the Squarespace Five Template, a minimal Squarespace template using **_Node Package Manager_** for local development, module installation and deployment.

### Installation and use

***Prerequisite:***

If you haven't already, install the [Squarespace Local Development Server](http://developers.squarespace.com/local-development). Then...

Clone this repository:

```
git clone https://your-website.squarespace.com/template.git [yourdirectory]
```

Update repository origin

```
cd yourdirectory
git remote rename origin vendor
git remote add origin git@github.com:[yourname]/[your-package].git
git push -u origin master
```

Install ~~npm~~ yarn packages:

```
yarn install
```

Install the Local Development Server

```
yarn install -g @squarespace/server
```

Start working:

```
yarn start:auth
```

... Make some changes.

Finally, deploy:

```
yarn deploy
```

### Dependencies

Five Template depends on the following Squarespace modules for development:

* [@squarespace/toolbelt](https://github.com/Squarespace/squarespace-toolbelt) - utilities for building and deploying a template.
* [webpack](https://webpack.github.io/) - The JS bundler we're using.

Five Template also depends on the following modules at runtime:

* [@squarespace/core](https://github.com/Squarespace/squarespace-core) - core Squarespace javascript functionality

*Note: `yarn start` will prompt you to install the [Squarespace Local Development Server](developers.squarespace.com/local-development) if you haven't already.*


### Full ~~npm~~ yarn script reference


#### `yarn build`

Cleans the build folder, copies squarespace files (jsont, less, assets folder content) into the build folder, runs webpack to build the template javascript.

#### `yarn watch`

Runs build, then watches the source folder for changes to squarespace files and javascript, automatically updating the built template for each change.

#### `yarn start [-- options]`

Runs watch, and simultaneously launches sqs-server. By default this runs on localhost:9000. If you want to use another port use the command:

```
yarn start -- -p PORT
```

#### `yarn deploy [-- options]`

Deploys your built template to production using git. If not already configured, initializes a git repo for deployment in your build folder. Note this is separate from your source repository, and will only contain the production built template.

By default your deployment will be commited with just a timestamp message. If you want to provide a custom message use the command:

```
yarn deploy -- -m "your message"
```

### Project Structure

    /yourdirectory
    |--- assets/
    |--- blocks/
    |--- build/             <-- generated by the build script, ignored by this repo
    |--- collections/
    |--- node_modules/      <-- generated by yarn install, ignored by this repo
    |--- pages/
    |--- scripts/
    |--- styles/
    |--- site.region
    |--- template.conf
    |--- package.json        <-- defines build commands, template module dependencies
    |--- webpack.config.json <-- webpack build settings

## Copyright and License

Copyright 2016 Squarespace, INC.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
